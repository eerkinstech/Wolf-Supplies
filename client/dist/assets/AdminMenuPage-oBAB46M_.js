import{j as e}from"./editor-BiSlXHWs.js";import{a as t}from"./vendor-0z5P9xg-.js";import{z as r}from"./index-BiO51Ilc.js";import{A as o}from"./AdminLayout-Cnhsu9ug.js";import"./redux-DhaBhdiE.js";const l=()=>{const[l,s]=t.useState([]),[a,n]=t.useState(!1),[i,c]=t.useState(""),[d,u]=t.useState(""),[m,p]=t.useState(null),[x,g]=t.useState(""),[b,h]=t.useState(""),[y,f]=t.useState({}),[v,C]=t.useState(null),[k,j]=t.useState(""),[N,w]=t.useState(""),[S,M]=t.useState(null),[_,$]=t.useState(null),[L,E]=t.useState(null),[P,A]=t.useState(null),[D,O]=t.useState(null),[T,z]=t.useState([]),[J,F]=t.useState([]),[q,R]=t.useState([]),[W,Q]=t.useState([]),[U,B]=t.useState(new Set),[H,I]=t.useState(!1),[G,K]=t.useState(null),[V,X]=t.useState(""),[Y,Z]=t.useState([]),[ee,te]=t.useState([]),re=()=>{n(!1),c(""),u("")},oe=()=>{p(null),g(""),h("")},le=(e,t,r)=>e.map(e=>{if(e.id===t)return r(e);const o=e.submenu||e.sub||[];return o&&o.length>0?{...e,submenu:le(o,t,r),...e.sub&&{sub:le(e.sub,t,r)}}:e}),se=()=>{C(null),j(""),w("")},ae=async e=>{O(e),B(new Set),X(""),I(!0);try{const t="https://api.wolfsupplies.co.uk";if("categories"===e){const e=await fetch(`${t}/api/categories?all=true`),r=await e.json();z(r||[])}else if("products"===e){const e=await fetch(`${t}/api/products?limit=100`),r=await e.json();F(r.products||r||[])}else"pages"===e?R([{_id:"about",name:"About",slug:"about",url:"/about"},{_id:"shop",name:"Shop",slug:"shop",url:"/shop"},{_id:"categories",name:"Categories",slug:"categories",url:"/categories"},{_id:"contact",name:"Contact",slug:"contact",url:"/contact"},{_id:"faqs",name:"FAQs",slug:"faqs",url:"/policies/faq"},{_id:"payment-options",name:"Payment Options",slug:"payment-options",url:"/payment-options"}]):"policies"===e&&Q([{_id:"privacy",name:"Privacy Policy",slug:"privacy",url:"/privacy"},{_id:"terms",name:"Terms & Conditions",slug:"terms",url:"/terms"},{_id:"return-refund",name:"Return & Refund Policy",slug:"return-refund",url:"/return-refund"},{_id:"shipping",name:"Shipping Policy",slug:"shipping",url:"/shipping"}])}catch(t){r.error(`Failed to load ${e}`)}finally{I(!1)}},ne=e=>{if(G||P||L)B(new Set([e]));else{const t=new Set(U);t.has(e)?t.delete(e):t.add(e),B(t)}},ie=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},ce=()=>{$(null)},de=(e,t,r,o)=>{if(0===t.length){const t=[...e],l=t[r];return t.splice(r,1),t.splice(o,0,l),t}const[l,...s]=t;return e.map((e,t)=>{if(t===l){const t=e.submenu||e.sub||[],l=de(t,s,r,o);return{...e,submenu:l,...e.sub&&{sub:l}}}return e})},ue=(t,o,l=[],a=0)=>{const n=`${l.join("-")}-${o}`,i=y[n],c=S&&S.index===o&&S.level===a&&JSON.stringify(S.parentPath)===JSON.stringify(l),d=[{bg:"var(--color-bg-primary)",border:"var(--color-border-light)",text:"var(--color-text-primary)",accent:"var(--color-accent-primary)"},{bg:"#f8f9fa",border:"var(--color-border-light)",text:"var(--color-text-primary)",accent:"var(--color-accent-primary)"},{bg:"#f0f1f3",border:"var(--color-border-light)",text:"var(--color-text-primary)",accent:"var(--color-accent-primary)"},{bg:"#e8e9eb",border:"var(--color-border-light)",text:"var(--color-text-primary)",accent:"var(--color-accent-primary)"}],u=d[Math.min(a,d.length-1)],L=v===t.id;return e.jsxs("li",{draggable:!0,onDragStart:e=>((e,t,r=0,o=[])=>{e.stopPropagation(),M({index:t,level:r,parentPath:o}),e.dataTransfer.effectAllowed="move"})(e,o,a,l),onDragOver:ie,onDragLeave:ce,onDrop:e=>((e,t,r=0,o=[])=>{if(e.preventDefault(),e.stopPropagation(),!S)return M(null),void $(null);const l=S.level,a=S.parentPath;if(l===r&&JSON.stringify(a)===JSON.stringify(o)){if(S.index===t)return M(null),void $(null);s(0===r?e=>{const r=[...e],o=r[S.index];return r.splice(S.index,1),r.splice(t,0,o),r}:e=>de(e,o,S.index,t))}M(null),$(null)})(e,o,a,l),className:`border-2 rounded-lg transition-all ${c?"opacity-40 ring-2 ring-yellow-400":""} ${_===t.id?"ring-2 ring-blue-500":""}`,style:{borderColor:u.border,backgroundColor:u.bg,marginLeft:20*a+"px",boxShadow:a>0?"0 2px 4px rgba(0,0,0,0.05)":"none",cursor:"grab"},onDragEnter:()=>$(t.id),children:[L?e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1",style:{color:"var(--color-text-light)"},children:"Label"}),e.jsx("input",{value:k,onChange:e=>j(e.target.value),placeholder:"Menu item label",className:"w-full border-2 px-3 py-2 rounded text-sm",style:{borderColor:"var(--color-border-light)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1",style:{color:"var(--color-text-light)"},children:"Link"}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.jsx("input",{value:N,onChange:e=>w(e.target.value),placeholder:"Link or URL",className:"flex-1 border-2 px-3 py-2 rounded text-sm",style:{borderColor:"var(--color-border-light)"}}),e.jsx("button",{onClick:()=>{K(t.id),ae("categories")},className:"px-2 py-2 rounded text-xs font-medium text-white",style:{backgroundColor:"#6366f1"},title:"Select from categories",children:"ðŸ“"}),e.jsx("button",{onClick:()=>{K(t.id),ae("products")},className:"px-2 py-2 rounded text-xs font-medium text-white",style:{backgroundColor:"#8b5cf6"},title:"Select from products",children:"ðŸ›ï¸"}),e.jsx("button",{onClick:()=>{K(t.id),ae("pages")},className:"px-2 py-2 rounded text-xs font-medium text-white",style:{backgroundColor:"#14b8a6"},title:"Select from pages",children:"ðŸ“„"}),e.jsx("button",{onClick:()=>{K(t.id),ae("policies")},className:"px-2 py-2 rounded text-xs font-medium text-white",style:{backgroundColor:"#ec4899"},title:"Select from policies",children:"âš–ï¸"})]})]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("button",{onClick:()=>(e=>{k.trim()?(s(t=>le(t,e,e=>({...e,label:k.trim(),name:k.trim(),url:N.trim()||"#",link:N.trim()||"#"}))),r.success("Menu item updated"),se()):r.error("Label cannot be empty")})(t.id),className:"flex-1 text-white px-3 py-2 rounded font-medium text-sm",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:"Save"}),e.jsx("button",{onClick:se,className:"flex-1 px-3 py-2 border-2 rounded font-medium text-sm",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)"},children:"Cancel"})]})]})}):e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{style:{color:"var(--color-text-light)",fontSize:"18px"},children:"â‹®â‹®"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold text-sm",style:{color:u.text},children:[a>0&&e.jsx("span",{style:{color:"var(--color-text-light)"},className:"mr-2",children:"â”œ"}),t.name]}),e.jsxs("div",{className:"text-xs",style:{color:"var(--color-text-light)"},children:[e.jsx("span",{className:"font-semibold",children:"link:"})," ",e.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:"500"},children:t.url||t.link})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[e.jsx("button",{onClick:()=>(e=>{C(e.id),j(e.label||e.name),w(e.url||e.link||"#")})(t),className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:"var(--color-accent-primary)",color:"white"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",title:"Edit this menu item",children:"âœŽ Edit"}),e.jsx("button",{onClick:()=>{return e=t.id,p(e),g(""),void h("");var e},className:"px-3 py-1 rounded text-sm font-medium text-white",style:{backgroundColor:"#10b981"},onMouseEnter:e=>e.target.style.backgroundColor="#059669",onMouseLeave:e=>e.target.style.backgroundColor="#10b981",children:"+ Sub"}),e.jsx("button",{onClick:()=>{return e=n,f(t=>({...t,[e]:!t[e]}));var e},className:"px-3 py-1 rounded border text-sm font-medium",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)"},title:i?"Collapse":"Expand",children:i?"â–²":"â–¼"}),e.jsx("button",{onClick:()=>(e=>{const t=(e,r)=>e.filter(e=>e.id!==r).map(e=>{const o=e.submenu||e.sub||[];return{...e,submenu:o?t(o,r):o,...e.sub&&{sub:e.sub?t(e.sub,r):e.sub}}});s(r=>t(r,e))})(t.id),className:"px-3 py-1 rounded text-sm font-medium flex items-center gap-2",style:{backgroundColor:"#fee",color:"#c33"},onMouseEnter:e=>e.target.style.backgroundColor="#fdd",onMouseLeave:e=>e.target.style.backgroundColor="#fee",children:"ðŸ—‘"})]})]}),i&&(t.submenu&&t.submenu.length>0||t.sub&&t.sub.length>0||m===t.id)&&e.jsxs("div",{className:"p-4 border-t-2",style:{borderColor:u.border,backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("div",{className:"mb-4 pb-3 border-b-2",style:{borderColor:u.border},children:e.jsxs("div",{className:"font-bold text-sm",style:{color:"var(--color-text-primary)"},children:["Submenus (",(t.submenu||t.sub||[]).length,")"]})}),e.jsxs("ul",{className:"space-y-3",children:[(t.submenu||t.sub||[]).map((e,t)=>ue(e,t,[...l,o],a+1)),m===t.id?e.jsx("li",{className:"p-4 rounded-lg border-2 border-dashed",style:{backgroundColor:"#fafafa",borderColor:"var(--color-accent-primary)"},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{value:x,onChange:e=>g(e.target.value),placeholder:"Submenu text",className:"border-2 px-3 py-2 rounded",style:{borderColor:"var(--color-border-light)"}}),e.jsx("input",{value:b,onChange:e=>h(e.target.value),placeholder:"Submenu link",className:"border-2 px-3 py-2 rounded",style:{borderColor:"var(--color-border-light)"}})]}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.jsx("button",{onClick:()=>{A(t.id),ae("categories")},className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#6366f1"},title:"Select from categories",children:"ðŸ“ Cat"}),e.jsx("button",{onClick:()=>{A(t.id),ae("products")},className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#8b5cf6"},title:"Select from products",children:"ðŸ›ï¸ Prod"}),e.jsx("button",{onClick:()=>{A(t.id),ae("pages")},className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#14b8a6"},title:"Select from pages",children:"ðŸ“„ Page"}),e.jsx("button",{onClick:()=>{A(t.id),ae("policies")},className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#f59e0b"},title:"Select from policies",children:"âš–ï¸ Pol"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{var e;(e=t.id)&&(s(t=>le(t,e,e=>{const t=e.submenu||[],r={id:`sub_${Date.now()}`,label:x||"Submenu",name:x||"Submenu",url:b||"#",link:b||"#",submenu:[]};return{...e,submenu:[...t,r]}})),r.success("Submenu added"),oe())},className:"text-white px-4 py-2 rounded font-medium text-sm flex-1",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:"Add"}),e.jsx("button",{onClick:oe,className:"px-4 py-2 border-2 rounded font-medium text-sm flex-1",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)"},children:"Cancel"})]})]})}):null]})]})]},t.id)};return t.useEffect(()=>{(async()=>{try{const e="https://api.wolfsupplies.co.uk",t=await fetch(`${e}/api/settings/menu`);if(!t.ok)return;const r=await t.json();r&&Array.isArray(r.browseMenu)&&s(r.browseMenu)}catch(e){}})()},[]),e.jsx(o,{activeTab:"menu",children:e.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:"var(--color-text-primary)"},children:"Menu Manager"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-light)"},children:"Drag menu items to reorder. Click Edit to modify labels and links."})]}),e.jsx("button",{onClick:async()=>{try{const t=e=>e.map(e=>{const r=e.submenu||e.sub||[],o={id:e.id,label:e.label||e.name,name:e.name,url:e.url||e.link,link:e.link};return r.length>0&&(o.submenu=t(r)),o}),o=t(l),s="https://api.wolfsupplies.co.uk",a=localStorage.getItem("token"),n={"Content-Type":"application/json"};a&&(n.Authorization=`Bearer ${a}`);const i=await fetch(`${s}/api/settings/menu`,{method:"POST",headers:n,body:JSON.stringify({browseMenu:o})});if(!i.ok){let t=i.statusText;try{const e=await i.json();t=e.message||JSON.stringify(e)}catch(e){}throw new Error(`Failed to save menu: ${i.status} ${t}`)}await i.json();r.success("Menu saved")}catch(t){r.error(t.message||"Save failed")}},className:"text-white px-6 py-3 rounded-lg font-semibold text-lg",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:"ðŸ’¾ Save"})]}),e.jsxs("div",{className:"mb-8 flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{n(!0),c(""),u("")},className:"text-white px-4 py-2 rounded-lg font-semibold",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:"+ Add Main Menu"}),a&&e.jsxs("div",{className:"flex items-center gap-2 flex-1 flex-wrap",children:[e.jsx("input",{value:i,onChange:e=>c(e.target.value),placeholder:"Menu title",className:"border-2 px-3 py-2 rounded",style:{borderColor:"var(--color-border-light)"}}),e.jsx("input",{value:d,onChange:e=>u(e.target.value),placeholder:"Link",className:"border-2 px-3 py-2 rounded",style:{borderColor:"var(--color-border-light)"}}),e.jsx("button",{onClick:()=>{E("categories"),ae("categories")},className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#6366f1"},onMouseEnter:e=>e.target.style.backgroundColor="#4f46e5",onMouseLeave:e=>e.target.style.backgroundColor="#6366f1",title:"Add category to menu",children:"ðŸ“"}),e.jsx("button",{onClick:()=>{E("products"),ae("products")},className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#8b5cf6"},onMouseEnter:e=>e.target.style.backgroundColor="#7c3aed",onMouseLeave:e=>e.target.style.backgroundColor="#8b5cf6",title:"Add product to menu",children:"ðŸ›ï¸"}),e.jsx("button",{onClick:()=>{E("pages"),ae("pages")},className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#ec4899"},onMouseEnter:e=>e.target.style.backgroundColor="#be185d",onMouseLeave:e=>e.target.style.backgroundColor="#ec4899",title:"Add page to menu",children:"ðŸ“„"}),e.jsx("button",{onClick:()=>{E("policies"),ae("policies")},className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#f59e0b"},onMouseEnter:e=>e.target.style.backgroundColor="#d97706",onMouseLeave:e=>e.target.style.backgroundColor="#f59e0b",title:"Add policy to menu",children:"âš–ï¸"}),e.jsx("button",{onClick:()=>{if(!i.trim())return void r.error("Please enter a title");const e=`main_${Date.now()}`,t={id:e,label:i.trim(),name:i.trim(),url:d.trim()||"#",link:d.trim()||"#",submenu:[]};s(e=>[...e,t]),r.success("Main menu item added"),re(),f(t=>({...t,[e]:!0}))},className:"text-white px-4 py-2 rounded font-semibold",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:"âœ“ Add"}),e.jsx("button",{onClick:re,className:"px-4 py-2 border-2 rounded font-semibold",style:{borderColor:"var(--color-border-light)"},children:"âœ• Cancel"})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2 p-4 rounded-lg",style:{backgroundColor:"rgba(0,0,0,0.02)",borderColor:"var(--color-border-light)",borderWidth:"1px"},children:[e.jsx("span",{className:"font-semibold text-sm",style:{color:"var(--color-text-primary)"},children:"Quick Add:"}),e.jsx("button",{onClick:()=>ae("categories"),className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#6366f1"},onMouseEnter:e=>e.target.style.backgroundColor="#4f46e5",onMouseLeave:e=>e.target.style.backgroundColor="#6366f1",children:"ðŸ“ Categories"}),e.jsx("button",{onClick:()=>ae("products"),className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#8b5cf6"},onMouseEnter:e=>e.target.style.backgroundColor="#7c3aed",onMouseLeave:e=>e.target.style.backgroundColor="#8b5cf6",children:"ðŸ›ï¸ Products"}),e.jsx("button",{onClick:()=>ae("policies"),className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#ec4899"},onMouseEnter:e=>e.target.style.backgroundColor="#db2777",onMouseLeave:e=>e.target.style.backgroundColor="#ec4899",children:"ðŸ“‹ Policies"}),e.jsx("button",{onClick:()=>ae("pages"),className:"px-3 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"#14b8a6"},onMouseEnter:e=>e.target.style.backgroundColor="#0d9488",onMouseLeave:e=>e.target.style.backgroundColor="#14b8a6",children:"ðŸ“„ Pages"})]}),e.jsxs("div",{className:"p-6 rounded-lg shadow-lg",style:{backgroundColor:"var(--color-bg-primary)",borderColor:"var(--color-border-light)",borderWidth:"1px"},children:[e.jsx("h2",{className:"font-bold text-lg mb-6",style:{color:"var(--color-text-primary)"},children:"Menu Hierarchy"}),0===l.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg",style:{color:"var(--color-text-light)"},children:"No menu items yet"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-light)"},children:'Click "Add Main Menu" to create your first item'})]}):e.jsx("ul",{className:"space-y-4",children:l.map((e,t)=>ue(e,t,[],0))})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[80vh] flex flex-col",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsxs("div",{className:"p-6 border-b",style:{borderColor:"var(--color-border-light)"},children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"var(--color-text-primary)"},children:["Select ",D.charAt(0).toUpperCase()+D.slice(1)]}),("categories"===D||"products"===D)&&e.jsx("input",{type:"text",placeholder:`Search ${D}...`,value:V,onChange:e=>X(e.target.value),className:"w-full border-2 px-3 py-2 rounded text-sm",style:{borderColor:"var(--color-border-light)"}})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:H?e.jsx("p",{style:{color:"var(--color-text-light)"},children:"Loading..."}):e.jsx(e.Fragment,{children:"policies"===D?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-sm mb-2",style:{color:"var(--color-text-primary)"},children:"Policies"}),W.length>0?W.map(t=>e.jsxs("label",{className:"flex items-center p-3 rounded cursor-pointer hover:bg-gray-100",style:{backgroundColor:U.has(t._id||t.id)?"rgba(0,0,0,0.05)":"transparent"},children:[e.jsx("input",{type:"checkbox",checked:U.has(t._id||t.id),onChange:()=>ne(t._id||t.id),className:"mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:t.name||t.title})})]},t._id||t.id)):e.jsx("p",{style:{color:"var(--color-text-light)"},children:"No policies available"})]})}):"pages"===D?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-sm mb-2",style:{color:"var(--color-text-primary)"},children:"Pages"}),q.length>0?q.map(t=>e.jsxs("label",{className:"flex items-center p-3 rounded cursor-pointer hover:bg-gray-100",style:{backgroundColor:U.has(t._id||t.id)?"rgba(0,0,0,0.05)":"transparent"},children:[e.jsx("input",{type:"checkbox",checked:U.has(t._id||t.id),onChange:()=>ne(t._id||t.id),className:"mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:t.name||t.title})})]},t._id||t.id)):e.jsx("p",{style:{color:"var(--color-text-light)"},children:"No pages available"})]})}):(()=>{const e=V.toLowerCase();return"categories"===D?T.filter(t=>(t.name||t.title||"").toLowerCase().includes(e)):"products"===D?J.filter(t=>(t.name||t.title||"").toLowerCase().includes(e)):"pages"===D?q.filter(t=>(t.name||t.title||"").toLowerCase().includes(e)):"policies"===D?W.filter(t=>(t.name||t.title||"").toLowerCase().includes(e)):[]})().map(t=>e.jsxs("label",{className:"flex items-center p-3 rounded cursor-pointer hover:bg-gray-100",style:{backgroundColor:U.has(t._id||t.id)?"rgba(0,0,0,0.05)":"transparent"},children:[e.jsx("input",{type:"checkbox",checked:U.has(t._id||t.id),onChange:()=>ne(t._id||t.id),className:"mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:t.name||t.title})})]},t._id||t.id))})}),e.jsxs("div",{className:"p-6 border-t flex gap-3 justify-end",style:{borderColor:"var(--color-border-light)"},children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 border-2 rounded font-semibold",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)"},children:"Cancel"}),e.jsxs("button",{onClick:()=>{if(0===U.size)return void r.error("Please select at least one item");let e=[];if("categories"===D?e=T.filter(e=>U.has(e._id||e.id)):"products"===D?e=J.filter(e=>U.has(e._id||e.id)):"pages"===D?e=q.filter(e=>U.has(e._id||e.id)):"policies"===D&&(e=W.filter(e=>U.has(e._id||e.id))),G&&e.length>0){const t=e[0],o=t.url||("categories"===D?`/category/${t.slug||t._id}`:"products"===D?`/product/${t.slug||t._id}`:"pages"===D?`/${t.slug||t._id}`:`/policies/${t.slug||t._id}`);return w(o),r.success(`Link set to: ${o}`),O(null),B(new Set),void K(null)}if(L&&e.length>0){const t=e[0],o=t.url||("categories"===D?`/category/${t.slug||t._id}`:"products"===D?`/product/${t.slug||t._id}`:"pages"===D?`/${t.slug||t._id}`:`/policies/${t.slug||t._id}`);return c(t.name||t.title),u(o),r.success(`Selected: ${t.name||t.title}`),O(null),B(new Set),void E(null)}if(P&&e.length>0){const t=e[0],o=t.url||("categories"===D?`/category/${t.slug||t._id}`:"products"===D?`/product/${t.slug||t._id}`:"pages"===D?`/${t.slug||t._id}`:`/policies/${t.slug||t._id}`);return g(t.name||t.title),h(o),r.success(`Selected: ${t.name||t.title}`),O(null),B(new Set),void A(null)}e.forEach(e=>{const t=`main_${Date.now()}_${Math.random()}`,r=e.url||("categories"===D?`/category/${e.slug||e._id}`:"products"===D?`/product/${e.slug||e._id}`:"pages"===D?`/${e.slug||e._id}`:`/policies/${e.slug||e._id}`),o={id:t,label:e.name||e.title,name:e.name||e.title,url:r,link:r,submenu:[]};s(e=>[...e,o]),f(e=>({...e,[t]:!0}))}),r.success(`Added ${e.length} item(s) to menu`),O(null),B(new Set)},className:"px-4 py-2 rounded font-semibold text-white",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:["Add Selected (",U.size,")"]})]})]})})]})})};export{l as default};
