import{j as t}from"./editor-BiSlXHWs.js";import{u as e,R as a,L as r}from"./vendor-0z5P9xg-.js";import{u as s,d as o}from"./redux-DhaBhdiE.js";import{u as i,d as l,e as n,z as c}from"./index-BiO51Ilc.js";const d=({product:d})=>{const m=s(),p=e(),[u,x]=a.useState(0);if(d.isDraft)return null;const h=d.variantCombinations&&d.variantCombinations.length>0,g=d.images&&d.images.length>0?d.images:d.image?[d.image]:[],{token:f}=i(),v=o(t=>t.cart.items),y=d.slug||d._id;return t.jsx(r,{to:`/product/${y}`,children:t.jsxs("div",{className:"md:hover:shadow-xl transition-all duration-300 overflow-hidden group h-full flex flex-col p-2 sm:p-4 rounded-lg bg-white shadow-md md:shadow-none",children:[t.jsx("div",{className:"w-full h-48 bg-[var(--color-bg-section)] rounded-lg overflow-hidden mb-4 flex items-center justify-center border border-[var(--color-border-light)]",children:t.jsx("img",{src:(b=g[u],b&&"string"==typeof b?b.startsWith("http")?b:`https://api.wolfsupplies.co.uk${b}`:""),alt:d.name,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-105 transition duration-300",onError:t=>t.target.style.display="none"})}),t.jsxs("div",{className:"flex flex-col flex-grow",children:[t.jsx("h3",{className:"font-bold text-black mb-2 line-clamp-2 text-sm group-hover:text-[var(--color-accent-primary)] transition duration-300",children:d.name}),d.numReviews>0&&t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"flex items-center gap-1",children:((e=0,a="text-lg")=>{const r=[];for(let s=1;s<=5;s++)e>=s?r.push(t.jsx("i",{className:`fas fa-star ${a} text-yellow-400`},s)):e>=s-.5?r.push(t.jsx("i",{className:`fas fa-star-half-alt ${a} text-yellow-400`},s)):r.push(t.jsx("i",{className:`far fa-star ${a} text-yellow-400`},s));return r})(d.rating||0,"text-sm")}),t.jsxs("span",{className:"text-xs text-[var(--color-text-light)]",children:[(d.rating||0).toFixed(1)," (",d.numReviews,")"]})]}),t.jsx("div",{className:"mb-4 flex items-baseline gap-2",children:h?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-[var(--color-text-light)]",children:"From"}),t.jsxs("span",{className:"text-lg font-bold text-[var(--color-accent-primary)]",children:["£",d.variantCombinations[0].price?.toFixed(2)||d.price?.toFixed(2)||"0.00"]})]}):t.jsxs("span",{className:"text-lg font-bold text-[var(--color-accent-primary)]",children:["£  ",d.price?.toFixed(2)||"0.00"]})}),h?t.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),p(`/product/${y}`)},className:"w-full bg-[var(--color-accent-primary)] hover:bg-[var(--color-accent-light)] text-white py-2 rounded font-bold text-sm transition-all duration-300 mt-auto opacity-100 md:opacity-0 md:group-hover:opacity-100 transform md:translate-y-2 md:group-hover:translate-y-0 shadow-md",children:"Select Options"}):t.jsx("button",{onClick:async t=>{t.preventDefault(),t.stopPropagation();const e=g?.[0]||"";let a="";"string"==typeof e?a=e:e&&"object"==typeof e&&(a=e.url||e.src||e.path||e.secure_url||e.secureUrl||e.public_url||e.publicUrl||"");const r={_id:d._id,product:d._id,name:d.name,image:a,price:Number(d.price||0),category:d.category,discount:d.discount,quantity:1,selectedVariants:{}};m(l(r));const s=v.find(t=>t._id===r._id)?v.map(t=>t._id===r._id?{...t,quantity:(t.quantity||0)+1}:t):[...v,r];try{await m(n(s)),c.success("Added to cart!")}catch{c.error("Failed to save cart to server")}},className:"w-full bg-[var(--color-accent-primary)] hover:bg-[var(--color-accent-light)] text-white py-2 rounded font-bold text-sm transition-all duration-300 mt-auto opacity-100 md:opacity-0 md:group-hover:opacity-100 transform md:translate-y-2 md:group-hover:translate-y-0 shadow-md",children:"Add to Cart"})]})]})});var b};export{d as P};
