import{j as e}from"./editor-BiSlXHWs.js";import{d as t,a as r}from"./vendor-0z5P9xg-.js";import{u as s,d as a}from"./redux-DhaBhdiE.js";import{u as o}from"./useMetaTags-DJRkGa8w.js";import{s as i,f as l}from"./index-BiO51Ilc.js";import{P as c}from"./ProductCard-B1CLfHgm.js";import{P as n}from"./ProductFilter-BPocuLir.js";const d=()=>{const d=s(),m=t(),{products:x,loading:h,filters:p}=a(e=>e.product),[g,u]=r.useState([]),[f,v]=r.useState("");o({title:"Shop All Products | Wolf Supplies LTD",description:"Browse our complete range of quality products. Fast UK delivery, competitive prices, and excellent customer service.",keywords:"products, shop, buy, online store, quality, affordable",url:"undefined"!=typeof window?window.location.href:""}),r.useEffect(()=>{const e=new URLSearchParams(m.search).get("search")||"";v(e),e&&d(i({...p,search:e}))},[m.search,d]),r.useEffect(()=>{d(l())},[d]);const b=r.useMemo(()=>{if(!x||0===x.length)return 100;let e=0;return x.forEach(t=>{t.price>e&&(e=t.price),t.variantCombinations&&t.variantCombinations.length>0&&t.variantCombinations.forEach(r=>{const s=r.price||t.price;s>e&&(e=s)})}),e||100},[x]);r.useEffect(()=>{let e=x;const t=p.search?.toLowerCase()||"";e=e.filter(e=>!e.isDraft);let r=[],s=[],a=[];e.forEach(e=>{const o=e.name.toLowerCase(),i=Array.isArray(e.categories)?e.categories.map(e=>(e.name||e).toLowerCase()).join(" "):(e.category||"").toLowerCase();t&&(o.includes(t)||i.includes(t))?o.startsWith(t)?r.push(e):s.push(e):a.push(e)});let o=[...r,...s,...a];p.category&&(o=o.filter(e=>Array.isArray(e.categories)?e.categories.some(e=>e._id===p.category||e.name===p.category):e.category===p.category)),p.availability&&p.availability.length>0&&(o=o.filter(e=>{let t;if(e.variants&&e.variants.length>0){t=e.variantCombinations&&e.variantCombinations.some(e=>e.stock>0)}else t=e.stock>0;return!(!p.availability.includes("in_stock")||!t)||!(!p.availability.includes("out_of_stock")||t)})),o=o.filter(e=>{if(e.variants&&e.variants.length>0&&e.variantCombinations&&e.variantCombinations.length>0){let t=null;for(const s of e.variantCombinations)s.price&&s.price>0&&(null===t||s.price<t)&&(t=s.price);const r=null!==t?t:e.price;return r>=p.price.min&&r<=p.price.max}return e.price>=p.price.min&&e.price<=p.price.max}),u(o)},[x,p]);const j=f&&g.length>0,y=r.useMemo(()=>f?g.filter(e=>e.name.toLowerCase().startsWith(f.toLowerCase())).length:0,[g,f]);return e.jsx("div",{className:"min-h-screen bg-[var(--color-bg-primary)] py-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-[var(--color-text-primary)] mb-4",children:"Our Products"}),f?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xl text-[var(--color-text-light)]",children:["Search results for: ",e.jsxs("span",{className:"font-bold text-[var(--color-text-primary)]",children:['"',f,'"']})]}),j&&e.jsxs("p",{className:"text-sm text-green-600 font-semibold",children:["âœ“ Found ",g.length," matching product",1!==g.length?"s":""," (Showing best matches first)"]})]}):e.jsx("p",{className:"text-xl text-[var(--color-text-light)]",children:"Browse our amazing collection of products"})]}),e.jsxs("div",{className:"grid lg:grid-cols-6 gap-10",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"sticky top-24",children:e.jsx(n,{filters:p,maxPrice:b,onFilterChange:e=>d(i(e))})})}),e.jsx("div",{className:"lg:col-span-4 space-y-8",children:h?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner animate-spin",style:{fontSize:"64px",color:"var(--color-text-light)",display:"block",marginBottom:"16px"}}),e.jsx("p",{className:"text-xl text-[var(--color-text-light)]",children:"Loading products..."})]})}):g.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 p-4 bg-gradient-to-r from-[var(--color-bg-section)] to-[var(--color-bg-section)] rounded-lg border border-[var(--color-border-light)]",children:[e.jsxs("p",{className:"text-[var(--color-text-light)]",children:["Showing ",e.jsx("span",{className:"font-bold text-[var(--color-text-primary)]",children:g.length})," product",1!==g.length?"s":"",f&&e.jsxs("span",{children:[' matching "',e.jsx("span",{className:"font-bold text-[var(--color-accent-primary)]",children:f}),'"']})]}),f&&y>0&&e.jsxs("p",{className:"text-sm text-green-700 mt-2",children:["ðŸ’¡ ",y," exact match",1!==y?"es":""," shown first"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map(t=>e.jsx(c,{product:t},t._id))})]}):e.jsxs("div",{className:"text-center py-24 bg-gradient-to-br from-[var(--color-bg-section)] to-[var(--color-bg-section)] rounded-2xl shadow-lg border border-[var(--color-border-light)]",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸ”"}),e.jsx("p",{className:"text-2xl text-[var(--color-text-light)] font-semibold mb-2",children:"No products found"}),f?e.jsxs("div",{children:[e.jsxs("p",{className:"text-[var(--color-text-light)] text-lg mb-4",children:["We couldn't find any products matching \"",e.jsx("span",{className:"font-bold",children:f}),'"']}),e.jsx("button",{onClick:()=>{d(i({...p,search:""})),v("")},className:"inline-block px-6 py-2 bg-[var(--color-accent-primary)] text-white font-bold rounded-lg hover:bg-[var(--color-accent-light)] transition duration-300",children:"View All Products"})]}):e.jsx("p",{className:"text-[var(--color-text-light)] text-lg",children:"Try adjusting your filters"})]})})]})]})})};export{d as default};
