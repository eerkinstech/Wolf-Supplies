import{j as e}from"./editor-BiSlXHWs.js";import{a as r}from"./vendor-0z5P9xg-.js";import{A as t}from"./AdminLayout-Cnhsu9ug.js";import{S as o}from"./SEOMetaForm-qWumqhTN.js";import{u as a,d as s}from"./redux-DhaBhdiE.js";import{a as l,z as i,t as n}from"./index-BiO51Ilc.js";const c=({categoryId:t,categoryName:o,categoryImage:a,productCount:s,onClose:l,onEditProduct:i})=>{const[n,c]=r.useState([{id:1,name:"Samsung Galaxy S24",sku:"SAM-S24-BLK",price:799.99,comparePrice:999.99,stock:45,image:null,rating:4.5,reviews:128,categoryId:1,status:"active",description:"Latest flagship smartphone with advanced features"},{id:2,name:"iPhone 15 Pro",sku:"APP-IP15-SLV",price:1099.99,comparePrice:1199.99,stock:32,image:null,rating:4.8,reviews:256,categoryId:1,status:"active",description:"Premium Apple smartphone"},{id:3,name:"Google Pixel 8",sku:"GOO-PIX8-BLU",price:699.99,comparePrice:899.99,stock:28,image:null,rating:4.3,reviews:89,categoryId:1,status:"active",description:"Google flagship with AI features"},{id:4,name:"OnePlus 12",sku:"ONE-12-GRN",price:649.99,comparePrice:799.99,stock:15,image:null,rating:4.2,reviews:67,categoryId:1,status:"low_stock",description:"Fast and smooth performance"}].filter(e=>e.categoryId===t)),[d,m]=r.useState(null),[g,x]=r.useState(""),[u,p]=r.useState("name"),b=[...n.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())||e.sku.toLowerCase().includes(g.toLowerCase()))].sort((e,r)=>{switch(u){case"price":return e.price-r.price;case"stock":return r.stock-e.stock;case"rating":return r.rating-e.rating;default:return e.name.localeCompare(r.name)}});return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:l,className:"text-gray-600 hover:text-gray-900 transition duration-300 p-2 hover:bg-gray-200 rounded-lg",title:"Back",children:e.jsx("i",{className:"fas fa-arrow-left text-xl"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[a?e.jsx("img",{src:a,alt:o,className:"w-12 h-12 object-cover rounded-lg border-2 border-indigo-300"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold",children:o.charAt(0)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o}),e.jsxs("p",{className:"text-sm text-gray-600",children:[b.length," of ",s," products"]})]})]})]}),e.jsx("button",{onClick:l,className:"text-gray-900 hover:text-gray-700 transition duration-300 p-2 hover:bg-gray-200 rounded-lg",title:"Close",children:e.jsx("i",{className:"fas fa-times text-2xl"})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 p-6 border-b border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",value:g,onChange:e=>x(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-800 focus:border-transparent outline-none transition duration-300"})}),e.jsxs("select",{value:u,onChange:e=>p(e.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-800 focus:border-transparent outline-none transition duration-300",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price",children:"Sort by Price"}),e.jsx("option",{value:"stock",children:"Sort by Stock"}),e.jsx("option",{value:"rating",children:"Sort by Rating"})]}),e.jsxs("div",{className:"text-sm text-gray-600 font-semibold",children:["Showing ",e.jsx("span",{className:"text-gray-700",children:b.length})," products"]})]}),e.jsx("div",{className:"overflow-y-auto flex-1 p-6",children:0===b.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("i",{className:"fas fa-box text-6xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-900 text-lg",children:g?"No products found matching your search":"No products in this category"})]}):e.jsx("div",{className:"grid gap-4",children:b.map(r=>{const t=(o=r.stock)>50?{label:"In Stock",color:"bg-gray-100 text-gray-800"}:o>0?{label:"Low Stock",color:"bg-yellow-100 text-yellow-800"}:{label:"Out of Stock",color:"bg-red-100 text-red-800"};var o,a;return e.jsx("div",{className:"bg-white rounded-xl border border-gray-300 hover:border-indigo-400 hover:shadow-lg transition duration-300 overflow-hidden",children:e.jsxs("div",{className:"flex gap-4 p-4",children:[e.jsx("div",{className:"flex-shrink-0",children:r.image?e.jsx("img",{src:r.image,alt:r.name,className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200"}):e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-200 to-black-300 rounded-lg flex items-center justify-center text-gray-900",children:e.jsx("i",{className:"fas fa-image text-2xl"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-900 mt-1",children:["SKU: ",e.jsx("span",{className:"font-mono",children:r.sku})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:r.description})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+(a=r.status,"active"===a?"bg-gray-100 text-gray-800":"low_stock"===a?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"active"===r.status?"Active":"Low Stock"})]}),r.rating&&e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("i",{className:"fas fa-star text-yellow-400"}),e.jsx("span",{className:"font-semibold text-gray-900",children:r.rating}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",r.numReviews||r.reviews?.length||r.reviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Price"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-700",children:["£",r.price.toFixed(2)]}),r.comparePrice&&e.jsxs("span",{className:"text-sm text-gray-900 line-through",children:["£",r.comparePrice.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Stock"}),e.jsx("div",{className:"mt-1",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${t.color}`,children:[r.stock," units"]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Savings"}),r.comparePrice?e.jsxs("p",{className:"text-lg font-bold text-gray-400 mt-1",children:["£",(r.comparePrice-r.price).toFixed(2)]}):e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:"—"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 justify-center",children:[e.jsx("button",{onClick:()=>m(r),className:"bg-gray-800 hover:bg-black text-white p-3 rounded-lg transition duration-300 shadow-md hover:shadow-lg flex items-center justify-center",title:"View Details",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{onClick:()=>i&&i(r),className:"bg-gray-800 hover:bg-black text-white p-3 rounded-lg transition duration-300 shadow-md hover:shadow-lg flex items-center justify-center",title:"Edit Product",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{onClick:()=>{return e=r.id,void(window.confirm("Are you sure you want to delete this product?")&&(c(n.filter(r=>r.id!==e)),alert("Product deleted successfully")));var e},className:"bg-red-600 hover:bg-red-700 text-white p-3 rounded-lg transition duration-300 shadow-md hover:shadow-lg flex items-center justify-center",title:"Delete Product",children:e.jsx("i",{className:"fas fa-trash"})})]})]})},r.id)})})}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:l,className:"px-6 py-2.5 border border-gray-300 text-gray-900 rounded-lg font-semibold hover:bg-gray-100 transition duration-300",children:"Close"})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Product Details"}),e.jsx("button",{onClick:()=>m(null),className:"text-gray-900 hover:text-gray-700 transition duration-300 p-1 hover:bg-gray-200 rounded-lg",children:e.jsx("i",{className:"fas fa-times text-lg"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Product Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:d.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"SKU"}),e.jsx("p",{className:"text-sm font-mono text-gray-700 mt-1",children:d.sku})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:d.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Price"}),e.jsxs("p",{className:"text-lg font-bold text-gray-700 mt-1",children:["£",d.price.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Stock"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:d.stock})]})]}),d.comparePrice&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Compare Price"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:["£",d.comparePrice.toFixed(2)]})]}),d.rating&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Rating"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("i",{className:"fas fa-star text-yellow-400"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:d.rating}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",d.numReviews||d.reviews?.length||d.reviews," reviews)"]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:()=>m(null),className:"px-4 py-2.5 border border-gray-300 text-gray-900 rounded-lg font-semibold hover:bg-gray-100 transition duration-300",children:"Close"})})]})})]})},d="https://api.wolfsupplies.co.uk",m=({showModal:r,onClose:t,title:a,formData:s,setFormData:l,handleAddCategory:i,handleImageUpload:n,editingCategory:c})=>r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"rounded-xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsxs("div",{className:"flex justify-between items-center p-6 transition duration-300",style:{borderBottomWidth:"1px",borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--color-text-primary)"},children:a}),e.jsx("button",{onClick:t,className:"transition duration-300 p-1 rounded-lg",style:{color:"var(--color-text-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-border-light)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:e.jsx("i",{className:"fas fa-times text-lg"})})]}),e.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Category Image"}),e.jsxs("label",{className:"flex items-center justify-center px-4 py-4 border-2 border-dashed rounded-xl cursor-pointer transition duration-300",style:{borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},onMouseEnter:e=>e.target.style.borderColor="var(--color-accent-primary)",onMouseLeave:e=>e.target.style.borderColor="var(--color-border-light)",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:n,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",style:{color:"var(--color-text-secondary)"},children:[e.jsx("i",{className:"fas fa-cloud-upload-alt text-3xl",style:{color:"var(--color-text-primary)"}}),e.jsx("span",{className:"text-sm font-semibold",children:"Click to upload"}),e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-light)"},children:"PNG, JPG up to 10MB"})]})]}),s.image&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs font-semibold mb-2",style:{color:"var(--color-text-light)"},children:"Current Image Preview:"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:s.image.startsWith("http")?s.image:`${d}${s.image}`,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border-2 shadow-md",style:{borderColor:"var(--color-accent-primary)"},onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%23ddd%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 font-family=%22sans-serif%22 font-size=%2214%22 fill=%22%23999%22%3EFailed to load%3C/text%3E%3C/svg%3E"}}),e.jsx("button",{type:"button",onClick:()=>l({...s,image:null}),className:"absolute -top-3 -right-3 text-white p-2 rounded-full transition duration-300 shadow-lg",style:{backgroundColor:"#ef4444"},onMouseEnter:e=>e.target.style.backgroundColor="#dc2626",onMouseLeave:e=>e.target.style.backgroundColor="#ef4444",title:"Remove image",children:e.jsx("i",{className:"fas fa-times text-sm"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:e=>l({...s,name:e.target.value}),className:"w-full px-4 py-2.5 border rounded-lg outline-none transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onFocus:e=>{e.target.style.borderColor="var(--color-accent-primary)",e.target.style.boxShadow="0 0 0 2px rgba(165, 99, 42, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--color-border-light)",e.target.style.boxShadow="none"},placeholder:"Enter category name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Description"}),e.jsx("textarea",{value:s.description,onChange:e=>l({...s,description:e.target.value}),rows:"3",className:"w-full px-4 py-2.5 border rounded-lg outline-none transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onFocus:e=>{e.target.style.borderColor="var(--color-accent-primary)",e.target.style.boxShadow="0 0 0 2px rgba(165, 99, 42, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--color-border-light)",e.target.style.boxShadow="none"},placeholder:"Enter category description"})]}),e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsx(o,{metaTitle:s.metaTitle,metaDescription:s.metaDescription,metaKeywords:s.metaKeywords,onChange:(e,r)=>l({...s,[e]:r}),defaultTitle:s.name})})]}),e.jsxs("div",{className:"flex gap-3 p-6 transition duration-300",style:{borderTopWidth:"1px",borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsx("button",{onClick:()=>{t(),l({name:"",description:"",image:null,productCount:0,metaTitle:"",metaDescription:"",metaKeywords:""})},className:"flex-1 px-4 py-2.5 border rounded-lg font-semibold transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onMouseEnter:e=>{e.target.style.backgroundColor="var(--color-bg-section)"},onMouseLeave:e=>{e.target.style.backgroundColor="var(--color-bg-primary)"},children:"Cancel"}),e.jsxs("button",{onClick:i,className:"flex-1 px-4 py-2.5 text-white rounded-lg font-semibold transition duration-300 flex items-center justify-center gap-2 shadow-md",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:[e.jsx("i",{className:"fas fa-plus"})," ",c?"Update":"Add"," Category"]})]})]})}):null,g=({showModal:r,onClose:t,title:a,formData:s,setFormData:l,handleAddSubcategory:i,handleImageUpload:n,editingCategory:c})=>r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"rounded-xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsxs("div",{className:"flex justify-between items-center p-6 transition duration-300",style:{borderBottomWidth:"1px",borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--color-text-primary)"},children:a}),e.jsx("button",{onClick:t,className:"transition duration-300 p-1 rounded-lg",style:{color:"var(--color-text-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-border-light)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:e.jsx("i",{className:"fas fa-times text-lg"})})]}),e.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Subcategory Image"}),e.jsxs("label",{className:"flex items-center justify-center px-4 py-4 border-2 border-dashed rounded-xl cursor-pointer transition duration-300",style:{borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},onMouseEnter:e=>e.target.style.borderColor="var(--color-accent-primary)",onMouseLeave:e=>e.target.style.borderColor="var(--color-border-light)",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:n,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",style:{color:"var(--color-text-secondary)"},children:[e.jsx("i",{className:"fas fa-cloud-upload-alt text-3xl",style:{color:"var(--color-text-light)"}}),e.jsx("span",{className:"text-sm font-semibold",children:"Click to upload"}),e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-light)"},children:"PNG, JPG up to 10MB"})]})]}),s.image&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs font-semibold mb-2",style:{color:"var(--color-text-light)"},children:"Current Image Preview:"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:s.image.startsWith("http")?s.image:`${d}${s.image}`,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border-2 shadow-md",style:{borderColor:"var(--color-accent-primary)"},onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%23ddd%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 font-family=%22sans-serif%22 font-size=%2214%22 fill=%22%23999%22%3EFailed to load%3C/text%3E%3C/svg%3E"}}),e.jsx("button",{type:"button",onClick:()=>l({...s,image:null}),className:"absolute -top-3 -right-3 text-white p-2 rounded-full transition duration-300 shadow-lg",style:{backgroundColor:"#ef4444"},onMouseEnter:e=>e.target.style.backgroundColor="#dc2626",onMouseLeave:e=>e.target.style.backgroundColor="#ef4444",title:"Remove image",children:e.jsx("i",{className:"fas fa-times text-sm"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-text-primary)"},children:"Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:e=>l({...s,name:e.target.value}),className:"w-full px-4 py-2.5 border rounded-lg outline-none transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onFocus:e=>{e.target.style.borderColor="var(--color-accent-primary)",e.target.style.boxShadow="0 0 0 2px rgba(165, 99, 42, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--color-border-light)",e.target.style.boxShadow="none"},placeholder:"Enter subcategory name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:e=>l({...s,description:e.target.value}),rows:"3",className:"w-full px-4 py-2.5 border rounded-lg outline-none transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onFocus:e=>{e.target.style.borderColor="var(--color-accent-primary)",e.target.style.boxShadow="0 0 0 2px rgba(165, 99, 42, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--color-border-light)",e.target.style.boxShadow="none"},placeholder:"Enter subcategory description"})]}),e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsx(o,{metaTitle:s.metaTitle,metaDescription:s.metaDescription,metaKeywords:s.metaKeywords,onChange:(e,r)=>l({...s,[e]:r}),defaultTitle:s.name})})]}),e.jsxs("div",{className:"flex gap-3 p-6 transition duration-300",style:{borderTopWidth:"1px",borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsx("button",{onClick:()=>{t(),l({name:"",description:"",image:null,productCount:0,metaTitle:"",metaDescription:"",metaKeywords:""})},className:"flex-1 px-4 py-2.5 border rounded-lg font-semibold transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onMouseEnter:e=>{e.target.style.backgroundColor="var(--color-bg-section)"},onMouseLeave:e=>{e.target.style.backgroundColor="var(--color-bg-primary)"},children:"Cancel"}),e.jsxs("button",{onClick:i,className:"flex-1 px-4 py-2.5 text-white rounded-lg font-semibold transition duration-300 flex items-center justify-center gap-2 shadow-md",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:[e.jsx("i",{className:"fas fa-plus"})," ",c?"Update":"Add"," Subcategory"]})]})]})}):null,x=({category:r,depth:t=0,onToggle:o,onEdit:a,onDelete:s,onAddSubcategory:l,onEditMain:i,parentId:n=null,failedImages:c=new Set,setFailedImages:m=()=>{}})=>{const g=32*t,u=[{bg:"bg-indigo-50",border:"border-indigo-400",text:"text-gray-700",gradient:"from-indigo-400 to-indigo-600"},{bg:"bg-gray-50",border:"border-gray-400",text:"text-gray-400",gradient:"from-gray-700 to-black-400"},{bg:"bg-gray-100",border:"border-blue-400",text:"text-gray-700",gradient:"from-blue-400 to-blue-600"},{bg:"bg-purple-50",border:"border-purple-400",text:"text-purple-600",gradient:"from-purple-400 to-purple-600"},{bg:"bg-pink-50",border:"border-pink-400",text:"text-pink-600",gradient:"from-pink-400 to-pink-600"},{bg:"bg-cyan-50",border:"border-cyan-400",text:"text-cyan-600",gradient:"from-cyan-400 to-cyan-600"}],p=u[t%u.length];return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:`hover:${p.bg} transition duration-300 ${t>0?`${p.bg} border-l-4 ${p.border}`:"bg-white"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",className:"rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",style:{marginLeft:`${g}px`},children:[e.jsx("button",{onClick:()=>{o(r._id)},className:`${p.text} hover:opacity-100 opacity-75 p-1 transition duration-300`,title:r.expandedSubcategories?"Collapse":"Expand",children:r.expandedSubcategories?e.jsx("i",{className:"fas fa-chevron-down"}):e.jsx("i",{className:"fas fa-chevron-right"})}),r.image&&!c.has(r._id)?e.jsx("img",{src:r.image.startsWith("http")?r.image:`${d}${r.image}`,alt:r.name,className:"w-10 h-10 object-cover rounded-lg border-2 border-gray-300",onError:e=>{e.target.style.display="none",m(e=>new Set([...e,r._id]))}}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex text-center items-center justify-center text-xs font-semibold text-gray-600 border-2 border-gray-300",children:"No Image"}),e.jsx("div",{children:e.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[0===t&&e.jsx("i",{className:"fas fa-layer-group text-xs",style:{color:"var(--color-text-primary)"}}),t>0&&e.jsx("i",{className:"fas fa-box text-xs",style:{color:"var(--color-text-primary)"}}),r.name]})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full font-semibold text-sm text-white",style:{backgroundColor:"var(--color-accent-primary)"},children:r.productCount||0})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{0===t&&i?i(r):a(n,r)},className:"bg-gray-800 hover:bg-black text-white p-2 rounded-lg transition duration-300 shadow-md hover:shadow-lg",title:"Edit",children:e.jsx("i",{className:"fas fa-edit text-sm"})}),e.jsx("button",{onClick:()=>s(n,r._id),className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition duration-300 shadow-md hover:shadow-lg",title:"Delete",children:e.jsx("i",{className:"fas fa-trash text-sm"})})]})})]}),r.expandedSubcategories&&r.subcategories&&r.subcategories.length>0&&r.subcategories.map(n=>e.jsx(x,{category:n,depth:t+1,onToggle:o,onEdit:a,onDelete:s,onAddSubcategory:l,onEditMain:i,parentId:r._id,failedImages:c,setFailedImages:m},n._id)),r.expandedSubcategories&&e.jsx("tr",{className:`${p.bg} border-l-4 ${p.border}`,children:e.jsx("td",{colSpan:"4",className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>l(r._id),className:`w-full text-left px-4 py-2 ${p.bg} hover:opacity-80 ${p.text} rounded-lg font-semibold transition duration-300 flex items-center gap-2 justify-center`,style:{marginLeft:`${g}px`},children:[e.jsx("i",{className:"fas fa-plus"})," Add Sub-Category to ",r.name]})})})]})},u=()=>{const t=a(),{categories:o=[],loading:u}=s(e=>e.category),[p,b]=r.useState([]),[h,y]=r.useState(!1),[f,v]=r.useState(!1),[j,N]=r.useState(null),[w,C]=r.useState(null),[k,S]=r.useState(!1),[E,M]=r.useState(null),[D,P]=r.useState(null),[A,L]=r.useState(""),[$,I]=r.useState("name-asc"),[T,F]=r.useState("menu"),[B,_]=r.useState(new Set);r.useEffect(()=>{t(l())},[t]),r.useEffect(()=>{const e=r=>(r||[]).map(r=>({...r,productCount:r.productCount||0,expandedSubcategories:D===r._id,subcategories:e(r.subcategories)}));b(o.map(r=>({...r,productCount:r.productCount||0,expandedSubcategories:D===r._id,subcategories:e(r.subcategories)}))||[])},[o,D]);const[K,z]=r.useState({name:"",description:"",image:null}),O=e=>{C(e),z({name:e.name,description:e.description,image:e.image,metaTitle:e.metaTitle||"",metaDescription:e.metaDescription||"",metaKeywords:e.metaKeywords||""}),y(!0)},U=(e,r)=>{N(e),C(r),z({name:r.name,description:r.description,image:r.image,productCount:r.productCount,metaTitle:r.metaTitle||"",metaDescription:r.metaDescription||"",metaKeywords:r.metaKeywords||""}),v(!0)},G=async(e,r)=>{if(window.confirm("Are you sure you want to delete this subcategory?"))try{const e=localStorage.getItem("token");if(!e)return void i.error("Authentication token not found");const o=await fetch(`${d}/api/categories/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});if(!o.ok){const e=await o.json();throw new Error(e.message||"Failed to delete subcategory")}i.success("Subcategory deleted successfully"),t(l())}catch(o){i.error(o.message||"Error deleting subcategory")}},W=async e=>{const r=e.target.files?.[0];if(r){if(r.size>5242880)return void i.error("Image size must be less than 5MB");try{const e=new FormData;e.append("image",r);const t=localStorage.getItem("token"),o=t?{Authorization:`Bearer ${t}`}:{},a=await n.post(`${d}/api/upload`,e,{headers:{...o,"Content-Type":"multipart/form-data"}});z(e=>({...e,image:a.data.url})),i.success("Image uploaded successfully")}catch(t){i.error("Failed to upload image. Please try again.")}}},R=()=>{C(null),z({name:"",description:"",image:null}),y(!0)},J=e=>{N(e),C(null),z({name:"",description:"",image:null}),v(!0)},q=(e,r)=>r.map(r=>r._id===e?{...r,expandedSubcategories:!r.expandedSubcategories}:r.subcategories&&r.subcategories.length>0?{...r,subcategories:q(e,r.subcategories)}:r),V=e=>e.reduce((e,r)=>{let t=1;return r.subcategories&&r.subcategories.length>0&&(t+=V(r.subcategories)),e+t},0),Z=e=>{let r=[];return e.forEach(e=>{r.push(e),e.subcategories&&e.subcategories.length>0&&(r=r.concat(Z(e.subcategories)))}),r},X=(e,r,t=0)=>{for(let o of r){if(o._id===e)return t;if(o.subcategories&&o.subcategories.length>0){const r=X(e,o.subcategories,t+1);if(-1!==r)return r}}return-1},Y=V(p),H=(()=>{const e=p;let r=e;if(A.trim()){const t=A.toLowerCase();r=e.filter(e=>e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}return[...r].sort((e,r)=>{switch($){case"name-asc":return e.name.localeCompare(r.name);case"name-desc":return r.name.localeCompare(e.name);case"date-newest":return new Date(r.createdAt||0)-new Date(e.createdAt||0);case"date-oldest":return new Date(e.createdAt||0)-new Date(r.createdAt||0);case"products-max":return(r.productCount||0)-(e.productCount||0);case"products-min":return(e.productCount||0)-(r.productCount||0);default:return 0}})})(),Q=(()=>{const e=p;let r=e;if(A.trim()){const t=A.toLowerCase();r=Z(e).filter(e=>e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}else r=Z(e);return[...r].sort((e,r)=>{switch($){case"name-asc":return e.name.localeCompare(r.name);case"name-desc":return r.name.localeCompare(e.name);case"date-newest":return new Date(r.createdAt||0)-new Date(e.createdAt||0);case"date-oldest":return new Date(e.createdAt||0)-new Date(r.createdAt||0);case"products-max":return(r.productCount||0)-(e.productCount||0);case"products-min":return(e.productCount||0)-(r.productCount||0);default:return 0}})})();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1  overflow-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",style:{color:"var(--color-text-primary)"},children:"Categories & Subcategories"}),e.jsx("p",{className:"mt-2",style:{color:"var(--color-text-light)"},children:"Manage your product categories with subcategories and products"})]}),e.jsxs("button",{onClick:R,className:"text-white px-6 py-3 rounded-lg font-semibold transition duration-300 flex items-center gap-2 shadow-lg",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:[e.jsx("i",{className:"fas fa-plus"})," Add Category"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[e.jsx("div",{className:"rounded-xl shadow-lg p-4 text-white",style:{backgroundColor:"var(--color-accent-primary)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold uppercase",children:"Total Categories"}),e.jsx("p",{className:"text-xs mt-1",children:"(Main + All Sub)"})]}),e.jsx("p",{className:"text-3xl font-bold",children:Y})]})}),e.jsx("div",{className:"rounded-xl shadow-lg p-4 text-white",style:{backgroundColor:"var(--color-text-secondary)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold uppercase",style:{opacity:.8},children:"Displaying"}),e.jsx("p",{className:"text-xs mt-1",style:{opacity:.7},children:"Filtered Results"})]}),e.jsx("p",{className:"text-3xl font-bold",children:H.length})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search categories...",value:A,onChange:e=>L(e.target.value),className:"flex-1 px-4 py-2 border rounded-lg outline-none font-semibold transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onFocus:e=>{e.target.style.borderColor="var(--color-accent-primary)",e.target.style.boxShadow="0 0 0 2px rgba(165, 99, 42, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--color-border-light)",e.target.style.boxShadow="none"}}),e.jsxs("select",{value:$,onChange:e=>I(e.target.value),className:"px-4 py-2 border rounded-lg outline-none font-semibold min-w-[200px] transition duration-300",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)"},onFocus:e=>{e.target.style.borderColor="var(--color-accent-primary)",e.target.style.boxShadow="0 0 0 2px rgba(165, 99, 42, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--color-border-light)",e.target.style.boxShadow="none"},children:[e.jsx("option",{value:"name-asc",children:"Sort: Name (A to Z)"}),e.jsx("option",{value:"name-desc",children:"Sort: Name (Z to A)"}),e.jsx("option",{value:"date-newest",children:"Sort: Date (Newest)"}),e.jsx("option",{value:"date-oldest",children:"Sort: Date (Oldest)"}),e.jsx("option",{value:"products-max",children:"Sort: Products (Maximum)"}),e.jsx("option",{value:"products-min",children:"Sort: Products (Minimum)"})]}),A&&e.jsx("button",{onClick:()=>L(""),className:"px-4 py-2 text-white rounded-lg transition-colors font-semibold",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:"Clear Search"})]}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>F("plain"),className:"px-6 py-2.5 rounded-lg font-semibold transition duration-300",style:{backgroundColor:"plain"===T?"var(--color-accent-primary)":"var(--color-bg-section)",color:"plain"===T?"white":"var(--color-text-primary)",boxShadow:"plain"===T?"0 4px 6px rgba(0, 0, 0, 0.1)":"none"},onMouseEnter:e=>{"plain"!==T&&(e.target.style.backgroundColor="var(--color-border-light)")},onMouseLeave:e=>{"plain"!==T&&(e.target.style.backgroundColor="var(--color-bg-section)")},children:"Plain Category"}),e.jsx("button",{onClick:()=>F("menu"),className:"px-6 py-2.5 rounded-lg font-semibold transition duration-300",style:{backgroundColor:"menu"===T?"var(--color-accent-primary)":"var(--color-bg-section)",color:"menu"===T?"white":"var(--color-text-primary)",boxShadow:"menu"===T?"0 4px 6px rgba(0, 0, 0, 0.1)":"none"},onMouseEnter:e=>{"menu"!==T&&(e.target.style.backgroundColor="var(--color-border-light)")},onMouseLeave:e=>{"menu"!==T&&(e.target.style.backgroundColor="var(--color-bg-section)")},children:"Menu Category"})]}),e.jsxs("div",{className:"rounded-xl shadow-lg overflow-hidden",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsx("div",{className:"px-6 py-4 transition duration-300",style:{backgroundColor:"var(--color-bg-section)",borderBottomWidth:"1px",borderColor:"var(--color-border-light)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--color-text-primary)"},children:"All Categories"}),e.jsxs("span",{className:"text-sm font-semibold",style:{color:"var(--color-text-light)"},children:[p.length," categories"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:0===("plain"===T?Q:H).length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6",children:[e.jsx("i",{className:"fas fa-layer-group text-6xl mb-4",style:{color:"var(--color-border-light)"}}),e.jsx("p",{className:"text-lg mb-4",style:{color:"var(--color-text-primary)"},children:A?"No categories match your search":"No categories yet"}),A&&e.jsx("button",{onClick:()=>L(""),className:"text-white px-6 py-3 rounded-lg font-semibold transition duration-300 inline-flex items-center gap-2 shadow-lg",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:"Clear Search"}),!A&&e.jsxs("button",{onClick:R,className:"text-white px-6 py-3 rounded-lg font-semibold transition duration-300 inline-flex items-center gap-2 shadow-lg",style:{backgroundColor:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-accent-light)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-accent-primary)",children:[e.jsx("i",{className:"fas fa-plus"})," Create Your First Category"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottomWidth:"1px",borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider",style:{color:"var(--color-text-primary)"},children:e.jsx("input",{type:"checkbox",className:"rounded"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider",style:{color:"var(--color-text-primary)"},children:"Title"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider",style:{color:"var(--color-text-primary)"},children:"Products"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider",style:{color:"var(--color-text-primary)"},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--color-border-light)"},children:"plain"===T?Q.map(r=>{const o=X(r._id,p),a=[{bg:"var(--color-bg-primary)",border:"var(--color-accent-primary)",tag:"Main",bgLight:"var(--color-bg-section)"},{bg:"var(--color-bg-primary)",border:"var(--color-accent-light)",tag:"Sub",bgLight:"var(--color-bg-section)"},{bg:"var(--color-bg-primary)",border:"var(--color-border)",tag:"Sub-Sub",bgLight:"var(--color-bg-section)"},{bg:"var(--color-bg-primary)",border:"var(--color-accent-primary)",tag:"Sub³",bgLight:"var(--color-bg-section)"}],s=a[Math.min(o,a.length-1)],n={bg:s.bgLight,border:"border-l-4",borderColor:s.border,tag:s.tag};return e.jsxs("tr",{className:`${n.bg} ${n.border} hover:opacity-80 transition duration-300`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",className:"rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[r.image&&!B.has(r._id)?e.jsx("img",{src:r.image.startsWith("http")?r.image:`${d}${r.image}`,alt:r.name,className:"w-10 h-10 object-cover rounded-lg border-2",style:{borderColor:"var(--color-accent-primary)"},onError:e=>{e.target.style.display="none",_(e=>new Set([...e,r._id]))}}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex text-center items-center justify-center text-xs font-semibold text-gray-600 border-2",style:{borderColor:"var(--color-border-light)"},children:"No Image"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-sm",style:{color:"var(--color-text-primary)"},children:r.name}),e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold rounded text-white",style:{backgroundColor:"var(--color-accent-primary)"},children:n.tag})]})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full font-semibold text-sm text-white",style:{backgroundColor:"var(--color-accent-primary)"},children:r.productCount||0})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{C(r),z({name:r.name,description:r.description,image:r.image}),y(!0)},className:"bg-gray-800 hover:bg-black text-white p-2 rounded-lg transition duration-300 shadow-md hover:shadow-lg",title:"Edit",children:e.jsx("i",{className:"fas fa-edit text-sm"})}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category?"))try{const r=localStorage.getItem("token");if(!(await fetch(`${d}/api/categories/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})).ok)throw new Error("Failed to delete category");i.success("Category deleted successfully"),t(l())}catch(r){i.error(r.message)}})(r._id),className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition duration-300 shadow-md hover:shadow-lg",title:"Delete",children:e.jsx("i",{className:"fas fa-trash text-sm"})})]})})]},r._id)}):H.map(r=>e.jsx(x,{category:r,depth:0,onToggle:e=>b(q(e,p)),onEdit:U,onDelete:G,onAddSubcategory:J,onEditMain:O,failedImages:B,setFailedImages:_},r._id))})]})})]})]})}),e.jsx(m,{showModal:h,onClose:()=>{y(!1),C(null),z({name:"",description:"",image:null})},title:w?"Edit Category":"Add New Category",formData:K,setFormData:z,handleAddCategory:async()=>{if(K.name.trim()){try{const e=localStorage.getItem("token"),r={name:K.name,description:K.description,slug:K.name.toLowerCase().replace(/\s+/g,"-"),image:K.image,metaTitle:K.metaTitle,metaDescription:K.metaDescription,metaKeywords:K.metaKeywords};if(w){if(!(await fetch(`${d}/api/categories/${w._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(r)})).ok)throw new Error("Failed to update category");i.success("Category updated successfully")}else{if(!(await fetch(`${d}/api/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(r)})).ok)throw new Error("Failed to create category");i.success("Category created successfully")}C(null),t(l())}catch(e){i.error(e.message)}z({name:"",description:"",image:null,metaTitle:"",metaDescription:"",metaKeywords:""}),y(!1)}else i.error("Category name is required")},handleImageUpload:W,editingCategory:w}),e.jsx(g,{showModal:f,onClose:()=>{v(!1),C(null),z({name:"",description:"",image:null})},title:w?"Edit Subcategory":"Add New Subcategory",formData:K,setFormData:z,handleAddSubcategory:async()=>{if(K.name.trim())try{const e=localStorage.getItem("token");if(!e)return void i.error("Authentication token not found");const r=w?`${d}/api/categories/${w._id}`:`${d}/api/categories`,o=w?"PUT":"POST",a={name:K.name,description:K.description,slug:K.name.toLowerCase().replace(/\s+/g,"-"),image:K.image,metaTitle:K.metaTitle,metaDescription:K.metaDescription,metaKeywords:K.metaKeywords,...w?{}:{parent:j}},s=await fetch(r,{method:o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(a)});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to save subcategory")}i.success(w?"Subcategory updated successfully":"Subcategory added successfully"),z({name:"",description:"",image:null,metaTitle:"",metaDescription:"",metaKeywords:""}),v(!1),C(null),j&&P(j),setTimeout(()=>{t(l())},300)}catch(e){i.error(e.message||"Error saving subcategory")}else i.error("Subcategory name is required")},handleImageUpload:W,editingCategory:w}),k&&E&&e.jsx(c,{categoryId:E.id,categoryName:E.name,categoryImage:E.image,productCount:E.productCount,onClose:()=>{S(!1),M(null)},onEditProduct:e=>{}})]})},p=()=>e.jsx(t,{activeTab:"categories",children:e.jsx(u,{})});export{p as default};
