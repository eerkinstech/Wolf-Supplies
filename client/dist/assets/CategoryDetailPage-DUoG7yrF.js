import{j as e}from"./editor-BiSlXHWs.js";import{g as s,u as t,R as a,a as i}from"./vendor-0z5P9xg-.js";import{u as r,d as l}from"./redux-DhaBhdiE.js";import{j as o,f as c,s as n,C as d}from"./index-BiO51Ilc.js";import{u as x}from"./useMetaTags-DJRkGa8w.js";import{P as m}from"./ProductCard-B1CLfHgm.js";import{P as g}from"./ProductFilter-BPocuLir.js";const h=()=>{const{slug:h}=s(),p=t(),f=r(),{categories:u,selectedCategory:b,loading:j,error:y}=l(e=>e.category),{products:v,filters:N}=l(e=>e.product),[w,C]=a.useState([]),[k,_]=a.useState([]);x({title:b?.metaTitle||b?.name||"Category",description:b?.metaDescription||b?.description||"Browse our product categories",keywords:b?.metaKeywords||"",image:b?.image||"",url:"undefined"!=typeof window?window.location.href:""}),i.useEffect(()=>{C([]),_([]),f(o(h)),f(c()),window.scrollTo(0,0)},[h,f]),i.useEffect(()=>{if(b&&b.subcategories&&b.subcategories.length>0){const e=Array.isArray(b.subcategories)?b.subcategories:u.filter(e=>b.subcategories.includes(e._id));_(e)}else _([])},[b,u]),i.useEffect(()=>{b&&f(n({category:b.name}))},[b,f]);const B=i.useMemo(()=>{if(!v||0===v.length)return 100;let e=0;return v.forEach(s=>{s.price>e&&(e=s.price),s.variantCombinations&&s.variantCombinations.length>0&&s.variantCombinations.forEach(t=>{const a=t.price||s.price;a>e&&(e=a)})}),e||100},[v]);return i.useEffect(()=>{let e=v;b&&(e=e.filter(e=>Array.isArray(e.categories)?e.categories.some(e=>e._id===b._id):e.category===b._id||e.category===b.name)),N.search&&(e=e.filter(e=>e.name.toLowerCase().includes(N.search.toLowerCase()))),N.availability&&N.availability.length>0&&(e=e.filter(e=>{let s;if(e.variants&&e.variants.length>0){s=e.variantCombinations&&e.variantCombinations.some(e=>e.stock>0)}else s=e.stock>0;return!(!N.availability.includes("in_stock")||!s)||!(!N.availability.includes("out_of_stock")||s)})),e=e.filter(e=>{if(e.variants&&e.variants.length>0&&e.variantCombinations&&e.variantCombinations.length>0){let s=null;for(const a of e.variantCombinations)a.price&&a.price>0&&(null===s||a.price<s)&&(s=a.price);const t=null!==s?s:e.price;return t>=N.price.min&&t<=N.price.max}return e.price>=N.price.min&&e.price<=N.price.max}),C(e)},[v,N,b]),j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-black-100 py-16 px-4 sm:px-6 lg:px-8 flex justify-center items-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-spinner animate-spin",style:{fontSize:"64px",color:"#9ca3af",display:"block",marginBottom:"16px"}}),e.jsx("p",{className:"text-xl text-gray-600",children:"Loading category..."})]})}):y||!b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-black-100 py-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("button",{onClick:()=>p("/categories"),className:"flex items-center gap-2 text-gray-400 hover:text-gray-700 font-semibold mb-8 transition duration-300",children:[e.jsx("i",{className:"fas fa-arrow-left"})," Back to Categories"]}),e.jsxs("div",{className:"text-center py-24 bg-white rounded-2xl shadow-lg",children:[e.jsx("div",{className:"text-6xl mb-6",children:"âš ï¸"}),e.jsx("p",{className:"text-2xl text-red-600 font-semibold mb-2",children:"Category Not Found"}),e.jsx("p",{className:"text-gray-900 text-lg",children:"The category you're looking for doesn't exist."})]})]})}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"relative h-80 md:h-96 overflow-hidden bg-gradient-to-br from-gray-700 to-grey-700",children:[b.image&&e.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover opacity-80"}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${b.color||"from-gray-700/70 to-grey-700/70"}`}),e.jsx("div",{className:"absolute inset-0 flex flex-col justify-center",children:e.jsx("div",{className:"max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"text-6xl md:text-7xl mb-6",children:b.icon}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:b.name}),e.jsx("p",{className:"text-white text-opacity-95 text-lg md:text-xl max-w-3xl leading-relaxed",children:b.description})]})})})]}),e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("button",{onClick:()=>p("/categories"),className:"flex items-center gap-2 text-gray-400 hover:text-gray-700 font-semibold transition duration-300 transform hover:-translate-x-1",children:[e.jsx("i",{className:"fas fa-arrow-left"})," Back to Categories"]})})}),e.jsx("div",{className:"py-16 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:k.length>0?e.jsxs("div",{className:"mb-16",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-3",children:b.parent?"Sub-Subcategories":"Subcategories"}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["Browse all ",b.parent?"sub-subcategories":"subcategories"," under ",e.jsx("span",{className:"font-semibold text-gray-400",children:b.name})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8",children:k.map(s=>e.jsx(d,{category:s},s._id))})]}):w.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-3",children:"main"===b.level?`All ${b.name} Products`:`${b.name} Products`}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["Showing ",e.jsx("span",{className:"font-semibold text-gray-400",children:w.length})," product",1!==w.length?"s":""]})]}),e.jsxs("div",{className:"grid lg:grid-cols-6 gap-10",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"sticky top-32",children:e.jsx(g,{filters:N,maxPrice:B,onFilterChange:e=>f(n(e))})})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-8",children:w.map(s=>e.jsx(m,{product:s},s._id))})})]})]}):e.jsxs("div",{className:"text-center py-24 bg-white rounded-2xl shadow-lg",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸ“­"}),e.jsx("p",{className:"text-2xl text-gray-600 font-semibold mb-2",children:"Nothing Found"}),e.jsx("p",{className:"text-gray-900 text-lg mb-8",children:"This category has no subcategories or products yet"}),e.jsxs("button",{onClick:()=>p("/categories"),className:"inline-flex items-center gap-2 text-gray-400 hover:text-gray-700 font-semibold transition duration-300",children:[e.jsx("i",{className:"fas fa-arrow-left"})," Back to Categories"]})]})})}),"main"===b.level&&e.jsx("div",{className:"bg-white py-16 px-4 sm:px-6 lg:px-8 mt-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Explore More Categories"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.filter(e=>"main"===e.level&&e._id!==b._id).slice(0,4).map(s=>e.jsxs("button",{onClick:()=>p(`/category/${s.slug}`),className:`bg-gradient-to-br ${s.color} rounded-xl p-6 text-white text-center hover:shadow-lg transition duration-300 transform hover:scale-105`,children:[e.jsx("div",{className:"text-4xl mb-2",children:s.icon}),e.jsx("p",{className:"font-bold text-lg",children:s.name})]},s._id))})]})})]})};export{h as default};
