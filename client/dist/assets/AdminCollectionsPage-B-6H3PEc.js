import{j as e}from"./editor-BiSlXHWs.js";import{a as r,L as t}from"./vendor-0z5P9xg-.js";import{u as o,d as a}from"./redux-DhaBhdiE.js";import{a as s,f as l,z as c}from"./index-BiO51Ilc.js";import{A as i}from"./AdminLayout-Cnhsu9ug.js";const n=()=>{const n=o(),{categories:d}=a(e=>e.category),m="https://api.wolfsupplies.co.uk",[x,g]=r.useState([]),[u,p]=r.useState("categories"),[b,y]=r.useState([]),[h,v]=r.useState("grid"),[f,j]=r.useState(5),[N,C]=r.useState([{title:"Featured Products 1",category:"",limit:4,layout:"grid"},{title:"Featured Products 2",category:"",limit:4,layout:"grid"},{title:"Featured Products 3",category:"",limit:4,layout:"grid"}]);r.useEffect(()=>{n(s()),n(l())},[n]),r.useEffect(()=>{const e=r=>{let t=[];if(!r||!Array.isArray(r))return t;for(const o of r)t.push(o),o.subcategories&&Array.isArray(o.subcategories)&&(t=t.concat(e(o.subcategories)));return t},r=e(d||[]);g(r||[])},[d]),r.useEffect(()=>{(async()=>{try{const e=await fetch(`${m}/api/settings/featured-collections`),r=await e.json();r.featuredCategories&&(y(r.featuredCategories.categoryNames||[]),v(r.featuredCategories.layout||"grid"),j(r.featuredCategories.columns||5)),r.featuredProducts&&Array.isArray(r.featuredProducts)&&r.featuredProducts.length>0&&C(r.featuredProducts)}catch(e){}})()},[]);const k=e=>{y(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},w=(e,r,t)=>{const o=[...N];o[e]={...o[e],[r]:t},C(o)};return e.jsx(i,{activeTab:"collections",children:e.jsxs("main",{className:"py-8 px-6 min-h-screen",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:"var(--color-text-primary)"},children:"Featured Collections"}),e.jsx("p",{style:{color:"var(--color-text-light)"},children:"Manage which products and categories appear as featured on your storefront"})]}),e.jsx(t,{to:"/admin",className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg font-semibold transition",style:{backgroundColor:"var(--color-bg-primary)",borderColor:"var(--color-border-light)",borderWidth:"1px",color:"var(--color-accent-primary)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-bg-section)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-bg-primary)",children:"â† Back to Dashboard"})]})}),e.jsx("div",{className:"rounded-t-xl sticky top-0 z-10",style:{backgroundColor:"var(--color-bg-primary)",borderColor:"var(--color-border-light)",borderBottomWidth:"1px"},children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>p("categories"),className:"flex-1 px-8 py-4 font-semibold text-center transition border-b-3",style:{borderColor:"categories"===u?"var(--color-accent-primary)":"transparent",color:"categories"===u?"var(--color-accent-primary)":"var(--color-text-primary)",backgroundColor:"categories"===u?"var(--color-bg-section)":"var(--color-bg-primary)"},children:"ğŸ“‚ Featured Categories"}),e.jsx("div",{style:{width:"1px",backgroundColor:"var(--color-border-light)"}}),e.jsx("button",{onClick:()=>p("products"),className:"flex-1 px-8 py-4 font-semibold text-center transition border-b-3",style:{borderColor:"products"===u?"var(--color-accent-primary)":"transparent",color:"products"===u?"var(--color-accent-primary)":"var(--color-text-primary)",backgroundColor:"products"===u?"var(--color-bg-section)":"var(--color-bg-primary)"},children:"ğŸ›ï¸ Featured Products (3 Sections)"})]})}),"categories"===u&&e.jsx("div",{className:"rounded-b-xl",style:{backgroundColor:"var(--color-bg-primary)",borderColor:"var(--color-border-light)",borderWidth:"1px",borderTopWidth:"0px"},children:e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-full space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[e.jsx("span",{className:"text-xl",children:"ğŸ“‚"})," Select Categories"]}),e.jsx("div",{className:"border rounded-lg max-h-80 overflow-y-auto",style:{borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-primary)"},children:x.length>0?x.map(r=>e.jsxs("label",{className:"flex items-center gap-3 px-4 py-3 border-b last:border-b-0 cursor-pointer transition",style:{borderColor:"var(--color-border-light)",color:"var(--color-text-primary)"},onMouseEnter:e=>e.target.parentElement.style.backgroundColor="var(--color-bg-section)",onMouseLeave:e=>e.target.parentElement.style.backgroundColor="var(--color-bg-primary)",children:[e.jsx("input",{type:"checkbox",checked:b.includes(r.name),onChange:()=>k(r.name),className:"w-5 h-5",style:{accentColor:"var(--color-accent-primary)"}}),e.jsx("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:r.name})]},r._id||r.id)):e.jsx("p",{className:"px-4 py-6 text-center",style:{color:"var(--color-text-primary)"},children:"No categories available"})})]}),e.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[e.jsx("span",{className:"text-xl",children:"ğŸ“"})," Display Layout"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition",style:{borderColor:"grid"===h?"var(--color-accent-primary)":"var(--color-border-light)"},onMouseEnter:e=>{"grid"!==h&&(e.target.style.borderColor="var(--color-accent-light)")},onMouseLeave:e=>{"grid"!==h&&(e.target.style.borderColor="var(--color-border-light)")},children:[e.jsx("input",{type:"radio",value:"grid",checked:"grid"===h,onChange:e=>v(e.target.value),className:"w-5 h-5",style:{accentColor:"var(--color-accent-primary)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:"Grid View"}),e.jsx("div",{className:"text-xs",style:{color:"var(--color-text-light)"},children:"Display all selected categories in grid"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition",style:{borderColor:"carousel"===h?"var(--color-accent-primary)":"var(--color-border-light)"},onMouseEnter:e=>{"carousel"!==h&&(e.target.style.borderColor="var(--color-accent-light)")},onMouseLeave:e=>{"carousel"!==h&&(e.target.style.borderColor="var(--color-border-light)")},children:[e.jsx("input",{type:"radio",value:"carousel",checked:"carousel"===h,onChange:e=>v(e.target.value),className:"w-5 h-5",style:{accentColor:"var(--color-accent-primary)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:"var(--color-text-primary)"},children:"Carousel"}),e.jsx("div",{className:"text-xs",style:{color:"var(--color-text-light)"},children:"5 items visible at once, slide through all selected"})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[e.jsx("span",{className:"text-xl",children:"ğŸ”²"})," Number of Columns"]}),e.jsx("p",{className:"text-xs mb-4",style:{color:"var(--color-text-light)"},children:"Applies to both Grid and Carousel layouts"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"2",max:"6",value:f,onChange:e=>j(Number(e.target.value)),className:"flex-1 cursor-pointer",style:{accentColor:"var(--color-accent-primary)"}}),e.jsx("span",{className:"text-2xl font-bold min-w-12 text-center px-4 py-2 rounded-lg border",style:{color:"var(--color-text-primary)",backgroundColor:"var(--color-bg-primary)",borderColor:"var(--color-border-light)"},children:f})]}),e.jsxs("p",{className:"text-sm mt-3",style:{color:"var(--color-text-light)"},children:[2===f&&"ğŸ“± 2 columns - Mobile friendly, larger items",3===f&&"ğŸ“± 3 columns - Tablet friendly",4===f&&"ğŸ–¥ï¸ 4 columns - Desktop view",5===f&&"ğŸ–¥ï¸ 5 columns - Standard desktop, many items",6===f&&"ğŸ–¥ï¸ 6 columns - Wide layout, compact items"]})]}),e.jsxs("div",{className:"border rounded-lg p-5",style:{borderColor:"var(--color-border-light)",backgroundColor:"var(--color-bg-section)"},children:[e.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:[e.jsx("span",{children:"ğŸ“‹"})," Selected Items"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.length>0?b.map(r=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium",style:{backgroundColor:"var(--color-accent-primary)",color:"white"},children:[r,e.jsx("button",{onClick:()=>k(r),className:"hover:text-gray-900",children:"âœ•"})]},r)):e.jsx("span",{className:"text-gray-700 text-sm",children:"No categories selected yet"})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-300",children:e.jsx("p",{className:"text-sm text-gray-900",children:e.jsxs("strong",{children:[b.length," categories selected"]})})})]}),e.jsx("button",{onClick:async()=>{if(0!==b.length)try{const e=localStorage.getItem("token");if(!(await fetch(`${m}/api/settings/featured-collections`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({featuredCategories:{categoryNames:b,layout:h,columns:f}})})).ok)throw new Error("Failed to save");c.success("âœ… Featured categories saved to database!")}catch(e){c.error("âŒ Failed to save featured categories")}else c.error("Select at least one category")},className:"w-full bg-black hover:bg-gray-700 text-white font-bold py-3 rounded-lg transition shadow-lg",children:"ğŸ’¾ Save Configuration"})]})})}),"products"===u&&e.jsx("div",{className:"bg-white rounded-b-xl",children:e.jsxs("div",{className:"space-y-10 p-8",children:[N.map((r,t)=>e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden hover:border-gray-400 transition",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-8 py-5",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-800 text-white rounded-full font-bold text-sm",children:t+1}),r.title||`Section ${t+1}`]})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-full space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ“"})," Section Title"]}),e.jsx("input",{type:"text",value:r.title,onChange:e=>w(t,"title",e.target.value),className:"w-full border-2 border-gray-300 px-4 py-3 rounded-lg focus:border-gray-400 focus:outline-none font-medium transition",placeholder:"e.g., Latest Electronics"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ“‚"})," Category (Optional)"]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 italic",children:"Leave blank to show all products from all categories"}),e.jsxs("select",{value:r.category,onChange:e=>w(t,"category",e.target.value),className:"w-full border-2 border-gray-300 px-4 py-3 rounded-lg focus:border-gray-400 focus:outline-none font-medium transition bg-white cursor-pointer",children:[e.jsx("option",{value:"",children:"-- All Products --"}),x.map(r=>e.jsx("option",{value:r.name,children:r.name},r._id||r.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ”¢"})," Items to Display"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"number",min:"1",max:"50",value:r.limit,onChange:e=>w(t,"limit",Number(e.target.value)),className:"flex-1 border-2 border-gray-300 px-4 py-3 rounded-lg focus:border-gray-400 focus:outline-none font-bold transition"}),e.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"items"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ“"})," Display Layout"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-400 transition",style:{borderColor:"grid"===r.layout?"var(--color-text-muted)":"var(--color-border)"},children:[e.jsx("input",{type:"radio",value:"grid",checked:"grid"===r.layout,onChange:e=>w(t,"layout",e.target.value),className:"w-5 h-5 accent-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Grid"}),e.jsx("div",{className:"text-xs text-gray-600",children:"5 columns, all items"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-400 transition",style:{borderColor:"carousel"===r.layout?"var(--color-text-muted)":"var(--color-border)"},children:[e.jsx("input",{type:"radio",value:"carousel",checked:"carousel"===r.layout,onChange:e=>w(t,"layout",e.target.value),className:"w-5 h-5 accent-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Carousel"}),e.jsx("div",{className:"text-xs text-gray-600",children:"5 visible, slide through"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-5",children:[e.jsx("h4",{className:"font-bold text-purple-900 mb-3 text-sm",children:"âš™ï¸ Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-800",children:"Title:"}),e.jsx("span",{className:"font-semibold text-purple-900",children:r.title||"Untitled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-800",children:"Category:"}),e.jsx("span",{className:"font-semibold text-purple-900",children:r.category||"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-800",children:"Count:"}),e.jsxs("span",{className:"font-semibold text-purple-900",children:[r.limit," items"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-800",children:"Layout:"}),e.jsx("span",{className:"font-semibold text-purple-900 uppercase",children:r.layout})]})]})]})]})})]},t)),e.jsx("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-xl p-8",children:e.jsxs("button",{onClick:async()=>{if(N.every(e=>!(!e.limit||e.limit<1)))try{const e=localStorage.getItem("token");if(!(await fetch(`${m}/api/settings/featured-collections`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({featuredProducts:N})})).ok)throw new Error("Failed to save");c.success("âœ… Featured products saved to database!")}catch(e){c.error("âŒ Failed to save featured products")}else c.error("Fill all sections with limit (min 1). Category is optional - leave blank to show all products")},className:"w-full bg-black hover:bg-gray-700 text-white font-bold py-4 rounded-lg transition shadow-lg text-lg flex items-center justify-center gap-3",children:[e.jsx("span",{children:"ğŸ’¾"})," Save All Featured Products Configurations"]})})]})})]})})};export{n as default};
